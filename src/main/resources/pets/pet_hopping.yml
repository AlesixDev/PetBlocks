# Unique template identifier
name: classic
# The version of this file.
# You can ignore this value, if it is not mentioned in the patchNotes.
version: 1.0
# The name of the pet shown above the pet. Supports ChatColors.
# Permission to allow players to change this value "petblocks.pet.displayName"
# Command /petblocks <name> displayName <value>
displayName: "%petblocks_owner_name%'s pet"
# Should the name of the pet be shown above the pet?
# Permission to allow players to change this value "petblocks.pet.isDisplayNameVisible"
# Command /petblocks <name> isDisplayNameVisible <true/false>
isDisplayNameVisible: true
# Should the pet be shown to all players (e.g. "ALL") or shown to just the owner (e.g. "OWNER")?
# Permission to allow players to change this value "petblocks.pet.visibility"
# Command /petblocks <name> visibility <value>
visibility: "ALL"
#
# Defines the action a pet should perform when a player rightclicks on it.
#
rightclick:
  actions:
    - name: "Open the deluxe menu" # Requires the DeluxeMenu plugin to be installed and configured to use the sample PetBlocks inventory.
      type: "command"
      level: "PLAYER"
      condition: '%petblocks_player_name% == %petblocks_owner_name%' # Checks if the player rightClicking the pet is the owner of the pet.
      run: |
        /petblocksmenu %petblocks_pet_name%
    - name: "Play effects when the owner rightclicks the pet"
      type: "command"
      level: "PLAYER"
      debug: "%petblocks_player_inventory_itemInMainHand_type%"
      condition: '%petblocks_player_name% == %petblocks_owner_name% && %petblocks_player_inventory_itemInMainHand_type% == "CARROT"'
      run: |
        /tell %petblocks_player_name% I love carrots <3
        /tell %petblocks_player_name% YES I LOVE THEM!

#
# Defines the action a pet should perform in an interval on its own.
#
loops:
  idle:
    actions:
      - name: "Delay Action"
        type: "delay"
        ticks: 120
      - name: "Look at owner"
        type: "command"
        level: "SERVER"
        run: |
          /petblocks lookat %petblocks_pet_name%  %petblocks_owner_location% %petblocks_owner_name%
      - name: "Switch to moveToOwner if pet is too far away"
        condition: "%petblocks_pet_distanceToOwner% > 10"
        type: "command"
        level: "SERVER"
        run: |
          /petblocks loop %petblocks_pet_name% moveToOwner %petblocks_owner_name%
  moveToOwner:
    actions:
      - name: "Delay Action"
        type: "delay"
        ticks: 200
      - name: "Play Particle Effect"
        type: "command"
        level: "SERVER"
        run: |
          /petblocks moveTo %petblocks_pet_name% %petblocks_owner_location% %petblocks_owner_name%
      - name: "Switch to idle if the pet is beside the player"
        condition: "%petblocks_pet_distanceToOwner% < 2"
        type: "command"
        level: "SERVER"
        run: |
          /petblocks loop %petblocks_pet_name% moveToOwner %petblocks_owner_name%
      - name: "Teleport pet to player if the pet is too far away for the pathfinder."
        condition: "%petblocks_pet_distanceToOwner% > 20"
        type: "command"
        level: "SERVER"
        run: |
          /petblocks teleport %petblocks_pet_name%  %petblocks_owner_location_back% %petblocks_owner_name%
  riding:
    actions:
      - name: "Delay Action"
        type: "delay"
        ticks: 200
      - name: "Play Particle Effect"
        type: "command"
        level: "SERVER"
        run: |
          /petblocks ride %petblocks_pet_name% %petblocks_owner_name%
      - name: "Switch to idle if the pet is beside the player"
        condition: "%petblocks_pet_distanceToOwner% < 2"
        type: "command"
        level: "SERVER"
        run: |
          /petblocks loop %petblocks_pet_name% moveToOwner %petblocks_owner_name%
  hat:
    actions:
      - name: "Delay Action"
        type: "delay"
        ticks: 200
      - name: "Switch to idle if the pet is beside the player"
        type: "command"
        level: "SERVER"
        run: |
          /petblocks hat %petblocks_pet_name% %petblocks_owner_name%
